# Synchronization

- `remote`: a git repository can have one or more remotes targeting to a uri(which means you can even add another local repository as remote with its path) exists in a git host.
    - `git remote add <remote_name> <uri>`.
    - each branch also has a *upstream* to track with remote just like the repository.
- `git fetch [<remote_name>]`: fetch **all** remote commits to local but do nothing, it only fetches and store it at `refs/remotes/<remote_name>/*`
    - use `git merge <remote_name>/<branch_name>` if you're ready to merge remote commits to local.
- `pull`: fetch remote commits for current branch and merge them into current branch.
    - this requires the branch has a *upstream* set.

## Remote

Remotes are implicit commits from the remote repository that can live optionally in your local repository.
Each remote has its branches, which means each of its branch has a head commit stored in your local repository.

## Remote Inspection

```console
$ git remote -v # inspect all remotes
origin  git@github.com:sharpchen/nixpkgs (fetch)
origin  git@github.com:sharpchen/nixpkgs (push)
upstream        git@github.com:NixOS/nixpkgs (fetch)
upstream        git@github.com:NixOS/nixpkgs (push)

$ git branch -v -r # inspect all remote branches
```

### Remote Naming Convention

The following convention is widely adapted by most git hosts such as github and gitlab, git host would add such remotes by convention when you fork one repository from another.

- `origin`: the remote represents the direct copy in a git host is usually named as *origin*
    - one repository can have one or more mirrors hosted on different git hosts, the most official one should be *origin*
    - `git clone` would implicitly name remote to *origin*
- `upstream`: if current repository is a fork of another, the one been forked should be named as `upstream`.

## Remote Identifier

- **full uri**: such as `git@github.com:NixOS/nixpkgs`
- **remote name**: such as `origin`

## Remote Branch Identifier

- `<remote_name>/<branch_name>`
- `<branch_name>@{upstream}` or `<branch_name>@{u}`: attached remote branch of `<branch_name>` **on local**.
    - `@{upstream}` or `@{u}`: attached remote branch of **current branch**(if you're on a branch)

## Pull

`git pull <remote_name> <branch_name>`

```sh
git branch -u <remote_name>/<branch_name> [<local_branch>] # make sure you have one upstream attached to the branch
git pull # pull remote commit from the attached upstream to current branch
```
